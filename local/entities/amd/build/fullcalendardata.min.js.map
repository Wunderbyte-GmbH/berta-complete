{"version":3,"file":"fullcalendardata.min.js","sources":["../src/fullcalendardata.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_entities\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {Calendar} from 'local_entities/fullcalendar';\nimport Ajax from 'core/ajax';\n\nvar initialLocaleCode = \"\";\nvar calendarEl = \"\";\n\n/**\n * Init Calendar\n * @param {entityid} entityid\n * @param {string} locale\n * @param {string} jsondata\n */\nexport const init = (entityid, locale, jsondata = null) => {\n    initialLocaleCode = locale;\n    calendarEl = document.getElementById('entity-calendar');\n    if (!jsondata) {\n        jsondata = getEntityCalendardata(entityid);\n    } else {\n        renderCalendar(jsondata);\n    }\n};\n\nconst renderCalendar = (events) => {\n    var calendar = new Calendar(calendarEl, {\n        timeZone: 'UTC',\n        eventStartEditable: false,\n        displayEventEnd: true,\n        headerToolbar: {\n          left: 'prev,next today',\n          center: 'title',\n          right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'\n        },\n        locale: initialLocaleCode,\n        buttonIcons: false,\n        weekNumbers: true,\n        navLinks: true,\n        editable: true,\n        dayMaxEvents: true,\n        events: events,\n        buttonText: {\n          prev: \"Zur\\xFCck\",\n          next: \"Vor\",\n          today: \"Heute\",\n          year: \"Jahr\",\n          month: \"Monat\",\n          week: \"Woche\",\n          day: \"Tag\",\n          list: \"Termin\\xFCbersicht\"\n        },\n        weekText: \"KW\",\n        weekTextLong: \"Woche\",\n        allDayText: \"Ganzt\\xE4gig\",\n        moreLinkText: function(n) {\n          return \"+ weitere \" + n;\n        },\n        noEventsText: \"Keine Ereignisse anzuzeigen\",\n        buttonHints: {\n          prev: function(buttonText) {\n            return \"Vorherige\".concat(affix(buttonText), \" \").concat(buttonText);\n          },\n          next: function(buttonText) {\n            return \"N\\xE4chste\".concat(affix(buttonText), \" \").concat(buttonText);\n          },\n          today: function(buttonText) {\n            if (buttonText === \"Tag\") {\n              return \"Heute\";\n            }\n            return \"Diese\".concat(affix(buttonText), \" \").concat(buttonText);\n          }\n        },\n        viewHint: function(buttonText) {\n          // eslint-disable-next-line no-nested-ternary\n          var glue = buttonText === \"Woche\" ? \"n\" : buttonText === \"Monat\" ? \"s\" : \"es\";\n          return buttonText + glue + \"ansicht\";\n        },\n        navLinkHint: \"Gehe zu $0\",\n        moreLinkHint: function(eventCnt) {\n          return \"Zeige \" + (eventCnt === 1 ? \"ein weiteres Ereignis\" : eventCnt + \" weitere Ereignisse\");\n        },\n        closeHint: \"Schlie\\xDFen\",\n        timeHint: \"Uhrzeit\",\n        eventHint: \"Ereignis\"\n      });\n      calendar.render();\n};\n\n/**\n * Returns the right affix\n * @param {string} buttonText\n * @returns {string}\n */\nfunction affix(buttonText) {\n    // eslint-disable-next-line no-nested-ternary\n    return buttonText === \"Tag\" || buttonText === \"Monat\" ? \"r\" : buttonText === \"Jahr\" ? \"s\" : \"\";\n}\n\n/**\n * Get Calendardata via WS.\n * @param {integer} entityid\n *\n */\nconst getEntityCalendardata = (entityid) => {\n    let request = {\n        methodname: 'local_entities_get_entity_calendardata',\n        args: {'id': entityid}\n    };\n    Ajax.call([request])[0].done(function(data) {\n        if (data.json) {\n            renderCalendar(JSON.parse(data.json));\n        } else {\n            // eslint-disable-next-line no-console\n            console.log(data.error);\n        }\n    }).fail();\n};\n"],"names":["initialLocaleCode","calendarEl","entityid","locale","jsondata","document","getElementById","renderCalendar","getEntityCalendardata","events","Calendar","timeZone","eventStartEditable","displayEventEnd","headerToolbar","left","center","right","buttonIcons","weekNumbers","navLinks","editable","dayMaxEvents","buttonText","prev","next","today","year","month","week","day","list","weekText","weekTextLong","allDayText","moreLinkText","n","noEventsText","buttonHints","concat","affix","viewHint","navLinkHint","moreLinkHint","eventCnt","closeHint","timeHint","eventHint","render","request","methodname","args","call","done","data","json","JSON","parse","console","log","error","fail"],"mappings":";;;;;0IAwBIA,kBAAoB,GACpBC,WAAa,iBAQG,SAACC,SAAUC,YAAQC,gEAAW,KAC9CJ,kBAAoBG,OACpBF,WAAaI,SAASC,eAAe,mBAChCF,SAGDG,eAAeH,UAFfA,SAAWI,sBAAsBN,iBAMnCK,eAAkBE,SACL,IAAIC,uBAAST,WAAY,CACpCU,SAAU,MACVC,oBAAoB,EACpBC,iBAAiB,EACjBC,cAAe,CACbC,KAAM,kBACNC,OAAQ,QACRC,MAAO,mDAETd,OAAQH,kBACRkB,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,UAAU,EACVC,cAAc,EACdb,OAAQA,OACRc,WAAY,CACVC,KAAM,SACNC,KAAM,MACNC,MAAO,QACPC,KAAM,OACNC,MAAO,QACPC,KAAM,QACNC,IAAK,MACLC,KAAM,mBAERC,SAAU,KACVC,aAAc,QACdC,WAAY,YACZC,aAAc,SAASC,SACd,aAAeA,GAExBC,aAAc,8BACdC,YAAa,CACXd,KAAM,SAASD,kBACN,YAAYgB,OAAOC,MAAMjB,YAAa,KAAKgB,OAAOhB,aAE3DE,KAAM,SAASF,kBACN,UAAagB,OAAOC,MAAMjB,YAAa,KAAKgB,OAAOhB,aAE5DG,MAAO,SAASH,kBACK,QAAfA,WACK,QAEF,QAAQgB,OAAOC,MAAMjB,YAAa,KAAKgB,OAAOhB,cAGzDkB,SAAU,SAASlB,mBAGVA,YADmB,UAAfA,WAAyB,IAAqB,UAAfA,WAAyB,IAAM,MAC9C,WAE7BmB,YAAa,aACbC,aAAc,SAASC,gBACd,UAAyB,IAAbA,SAAiB,wBAA0BA,SAAW,wBAE3EC,UAAW,YACXC,SAAU,UACVC,UAAW,aAEJC,mBAQNR,MAAMjB,kBAEW,QAAfA,YAAuC,UAAfA,WAAyB,IAAqB,SAAfA,WAAwB,IAAM,SAQ1Ff,sBAAyBN,eACvB+C,QAAU,CACVC,WAAY,yCACZC,KAAM,IAAOjD,yBAEZkD,KAAK,CAACH,UAAU,GAAGI,MAAK,SAASC,MAC9BA,KAAKC,KACLhD,eAAeiD,KAAKC,MAAMH,KAAKC,OAG/BG,QAAQC,IAAIL,KAAKM,UAEtBC"}